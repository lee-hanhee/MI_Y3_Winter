\subsection{Setup of CSP}
\begin{definition}
    A \textbf{constraint satisfaction problem (CSP)} consists of:
    \begin{itemize}
        \item a set of \textbf{variables}, $\mathcal{V}$, where the domain of $V \in \mathcal{V}$ is $\text{dom}(V)$
        \item a set of \textbf{constraints}, $\mathcal{C}$, where the scope of $C \in \mathcal{C}$ is $\text{scp}(C) \subseteq \mathcal{V}$
    \end{itemize}
\end{definition}

\subsection{Assignment}
\begin{definition}
    An \textbf{assignment} is a set of pairs, \(\{(V, v)\}_{V \in \tilde{\mathcal{V}}}\), where \(v \in \text{dom}(V)\), and \(\tilde{\mathcal{V}} \subseteq \mathcal{V}\). It is \textbf{complete} if \(\tilde{\mathcal{V}} = \mathcal{V}\), and \textbf{partial} otherwise.
\end{definition}

\subsection{Consistent}
\subsubsection{Complete Assignment}
\begin{definition}
    A complete assignment, \(A\), is \textbf{consistent} if it satisfies every constraint \(\mathcal{C}\) with \(\text{scp}(\mathcal{C}) \subseteq \tilde{\mathcal{V}}\).
\end{definition}

\begin{warning}
    A solution to a CSP is any complete and consistent assignment.
\end{warning}

\subsubsection{Partial Assignment}
\begin{definition}
    A (possibly partial) assignment, \(\{(V, v)\}_{V \in \tilde{\mathcal{V}}}\), is \textbf{consistent} if it satisfies every constraint, \(C \in \mathcal{C}\) such that \(\text{scp}(C) \subseteq \tilde{\mathcal{V}}\).
\end{definition}

\subsubsection{k-Consistent}
\begin{definition}
    A CSP is \textbf{\(k\)-consistent} if for any consistent assignment of \(k - 1\) variables, \(\{(V, v)\}_{V \in \tilde{\mathcal{V}}}\), and any \(k^\text{th}\) variable, \(V'\), there is a value, \(v' \in \text{dom}(V')\), so the assignment, \(\{(V, v)\}_{V \in \tilde{\mathcal{V}}} \cup \{(V', v')\}\) is consistent.
\end{definition}

\subsubsection{Edge/Arc Consistent}
\begin{definition}
    2-consistent.
\end{definition}
\newpage

\subsection{Constraint Satisfaction Algorithms}
\subsubsection{Main}
\begin{algo}

\end{algo}

\subsubsection{Satisfy}
\begin{algo}

\end{algo}

\subsubsection{Enforce: Enforcing k-Consistency}
\begin{algo}

\end{algo}

\subsubsection{EnforceVar: Enforcing k-Consistency}
\begin{algo}

\end{algo}
\newpage

\subsection{Setup of CSP}

\begin{example}
    \customFigure[0.5]{../Images/L3_0.png}{}
    \customFigure[0.5]{../Images/L3_1.png}{}
    \customFigure[0.5]{../Images/L3_2.png}{}
\end{example}
\newpage

\begin{process} \textbf{How to build a hyper-graph?}
    \begin{enumerate}
        \item Circle the variables that appear in constraint $C_i \; \forall i$.
    \end{enumerate}
\end{process}

\begin{example}
    \customFigure[0.5]{../Images/L3_3.png}{}
\end{example}

\begin{process} \textbf{How to build a path tree?}
    \begin{enumerate}
        \item 
    \end{enumerate}
\end{process}

\begin{example}
    \customFigure[0.5]{../Images/L3_4.png}{}
    \customFigure[0.5]{../Images/L3_5.png}{}
\end{example}

\begin{process} \textbf{How to determine a solution to a CSP?}
    \begin{enumerate}
        \item 
    \end{enumerate}
\end{process}

\begin{example}
    \customFigure[0.5]{../Images/L3_8.png}{}
\end{example}
\newpage

\begin{process} \textbf{How to check $k$-Consistency?} 
    \begin{enumerate}
        \item Given $\mathcal{V}$ w/ $\text{dom}(V) = \{v_1,\ldots,v_{|\text{dom}(V)|}\} \; \forall V \in \mathcal{V}$ and $\mathcal{C}$ w/ $\text{scp}(C) = \{V_1,\ldots,V_{|\text{scp}(C)|}\} \; \forall C \in \mathcal{C}$.
        \item Remove all constraints that have $k+1$ or more variables.
        \item For each $C \in \mathcal{C}$, do the following:
        \begin{enumerate}
            \item For each $V \in \text{scp}(C)$, do the following:
            \begin{enumerate}
                \item For each $v \in \text{dom}(V)$, do the following:
            \end{enumerate}
            \begin{itemize}
                \item Fix $V$ to $v$.
                \item For the other $V \in \text{scp}(C)$, check if the constraint is satisfied by trying all combinations (need only one). 
                \item \textbf{Key:} If there is one combination that doesn't satisfy the constraint, then the CSP is not $k$-consistent.
            \end{itemize}
        \end{enumerate}
        \item If all constraints are satisfied, then the CSP is $k$-consistent.
    \end{enumerate}
\end{process}

\begin{process} \textbf{How to Enforce $k$-Consistency?} 
    \begin{enumerate}
        \item Given $\mathcal{V}$ w/ $\text{dom}(V) = \{v_1,\ldots,v_{|\text{dom}(V)|}\} \; \forall V \in \mathcal{V}$ and $\mathcal{C}$ w/ $\text{scp}(C) = \{V_1,\ldots,V_{|\text{scp}(C)|}\} \; \forall C \in \mathcal{C}$.
        \item Remove all constraints that have $k+1$ or more variables.
        \item \textbf{Pre-pruning:} For each remaining $C \in \mathcal{C}$, do the following:
        \begin{enumerate}
            \item For each $V \in \text{scp}(C)$, do the following:
            \begin{enumerate}
                \item For each $v \in \text{dom}(V)$, do the following:
            \end{enumerate}
            \begin{itemize}
                \item Fix $V$ to $v$.
                \item For the other $V \in \text{scp}(C)$, check if the constraint is satisfied by trying all combinations (need only one). 
                \item \textbf{Key:} If the constraint is not satisfied, then remove the value from $\text{dom}(V)$.
            \end{itemize}
        \end{enumerate}
        \item If you had to remove any values from $\text{dom}(V)$, then check with the other constraints.
        \item \textbf{Pruning:} Every constraint is satisfied.
    \end{enumerate}
\end{process}
\newpage

\begin{example}
    \customFigure[0.5]{../Images/L3_6.png}{}    
    \customFigure[0.5]{../Images/L3_7.png}{Pre-pruning. Since only one constraint, it is also pruning.}    
\end{example}

\begin{example}
    Different ways to formulate the CSP problem. 
    \begin{itemize}
        \item How can you formualte the CSP problem in a different way? Can I get a specific example?
        \begin{itemize}
            \item The domain could be set to everything, then set the constraints later.
        \end{itemize}
        \item What is the constraint graph showing? Grouping the variables
        \item How do you check consistency in a CSP?
        \item Why can you use any search algorithm when you formulate this as a search problem? 
        \item What does a node contain? A node contans a path. 
        \begin{itemize}
            \item How does that match the example on slide 10. It does. 
        \end{itemize}
        \item Why is formulalting a CSP problem as a search problem a bad idea? B/c you have to search through all possible combinations, but if you find a constraint then you can prune the search space.
        \begin{itemize}
            \item A lot easier to see if there is a solution or not. But in a search problem, you see if there's a solution and how to get to it. 
        \end{itemize}
    \end{itemize}
\end{example}
\newpage




